import{_ as f,r as i,H as u,j as h,c,a,t as p,w as b,f as k,v as w,G as x,g as M,d,u as D}from"./index-DF6qZ6uJ.js";import{a as T,u as B,b as C}from"./category-BHyZ32ba.js";const S={class:"main-header"},V={class:"content-area"},F={key:0,class:"loading-indicator"},E={class:"form-group"},H={class:"form-action-buttons"},I=["disabled"],N={__name:"CategoryFormView",setup(R){const l=M(),m=D(),e=i(!1),r=i(null),n=u(()=>!!l.params.id),y=u(()=>n.value?"Sửa Danh Mục":"Thêm Danh Mục Mới"),g=u(()=>n.value?"Cập Nhật":"Thêm Danh Mục"),s=i({name:""});h(async()=>{if(n.value)try{e.value=!0;const t=await T(l.params.id);s.value.name=t.name}catch(t){console.error("Failed to fetch category data:",t),r.value="Không tìm thấy danh mục."}finally{e.value=!1}});const _=async()=>{e.value=!0,r.value=null;try{n.value?(await B(l.params.id,s.value),console.log("update category oke")):(await C(s.value),console.log("add category oke")),m.push({name:"admin-categories"})}catch(t){console.error("Submit failed:",t),r.value=t.message||"Đã có lỗi xảy ra."}finally{e.value=!1}};return(t,o)=>(d(),c("div",null,[a("div",S,[a("h1",null,p(y.value),1)]),a("div",V,[e.value?(d(),c("div",F,"Đang tải...")):(d(),c("form",{key:1,onSubmit:b(_,["prevent"])},[a("div",E,[o[2]||(o[2]=a("label",{for:"name"},"Tên danh mục",-1)),k(a("input",{"onUpdate:modelValue":o[0]||(o[0]=v=>s.value.name=v),type:"text",id:"name",class:"form-input",required:""},null,512),[[w,s.value.name]])]),a("div",H,[a("button",{type:"button",class:"btn",onClick:o[1]||(o[1]=v=>x(m).back()),style:{"background-color":"#6B7280",color:"white"}},"Hủy"),a("button",{type:"submit",class:"btn-primary",disabled:e.value},p(e.value?"Đang xử lý...":g.value),9,I)])],32))])]))}},G=f(N,[["__scopeId","data-v-1065a837"]]);export{G as default};
