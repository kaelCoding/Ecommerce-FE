import{_ as p,r as f,o as b,c as l,a as t,G as g,l as r,F as v,b as y,d as o,z as k,t as i,u as w}from"./index-BbMOQ7id.js";import{g as D,d as P}from"./product-CEGWPW6i.js";const V={class:"container"},C={class:"content-area"},N={class:"content-header"},x={class:"table-responsive"},B={class:"admin-table"},I=["src","alt"],F={class:"table-actions center"},S=["onClick"],T=["onClick"],L={__name:"ProductListView",setup(X){const u=w(),a=f([]);b(async()=>{await c(),console.log(a.value)});const c=async()=>{await D().then(e=>{a.value=e})},d=e=>{u.push({name:"admin-products-edit",params:{id:e}})},m=async e=>{if(window.confirm("Bạn có chắc chắn muốn xóa sản phẩm này không?"))try{await P(e),a.value=a.value.filter(n=>n.ID!==e),alert("Xóa sản phẩm thành công!")}catch(n){console.error("Failed to delete product:",n),alert("Xóa sản phẩm thất bại. Vui lòng thử lại.")}},h=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return(e,n)=>(o(),l("div",V,[n[6]||(n[6]=t("div",{class:"main-header"},[t("h1",null,"Sản Phẩm")],-1)),t("div",C,[t("div",N,[n[2]||(n[2]=t("h2",null,"Danh sách Sản Phẩm",-1)),t("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=s=>g(u).push({name:"admin-products-new"}))},n[1]||(n[1]=[t("i",{class:"fas fa-plus"},null,-1),r(" Thêm Mới ")]))]),t("div",x,[t("table",B,[n[5]||(n[5]=t("thead",null,[t("tr",null,[t("th",null,"Ảnh"),t("th",null,"Tên"),t("th",null,"Danh mục"),t("th",null,"Giá"),t("th",null,"Hành động")])],-1)),t("tbody",null,[(o(!0),l(v,null,y(a.value,s=>(o(),l("tr",{key:s.ID},[t("td",null,[s.image_urls&&s.image_urls.length>0?(o(),l("img",{key:0,src:s.image_urls[0],alt:s.name,class:"table-img"},null,8,I)):k("",!0)]),t("td",null,i(s.name),1),t("td",null,i(s.category_name),1),t("td",null,i(h(s.price)),1),t("td",null,[t("div",F,[t("button",{class:"btn btn-primary",onClick:_=>d(s.ID)},n[3]||(n[3]=[t("i",{class:"fas fa-edit"},null,-1),r(),t("span",null,"Sửa",-1)]),8,S),t("button",{class:"btn btn-primary",onClick:_=>m(s.ID)},n[4]||(n[4]=[t("i",{class:"fas fa-trash"},null,-1),r(),t("span",null,"Xóa",-1)]),8,T)])])]))),128))])])])])]))}},G=p(L,[["__scopeId","data-v-f24e35ee"]]);export{G as default};
