import{_ as f,r as i,I as u,p as h,c,a as e,t as p,w as b,f as k,v as w,H as x,l as M,d,u as D}from"./index-uB2lMEmz.js";import{a as T,u as B,b as C}from"./category-DoDOBcr4.js";const S={class:"main-header"},V={class:"content-area"},F={key:0,class:"loading-indicator"},I={class:"form-group"},E={class:"form-action-buttons"},H=["disabled"],N={__name:"CategoryFormView",setup(R){const l=M(),m=D(),a=i(!1),r=i(null),n=u(()=>!!l.params.id),y=u(()=>n.value?"Sửa Danh Mục":"Thêm Danh Mục Mới"),g=u(()=>n.value?"Cập Nhật":"Thêm Danh Mục"),s=i({name:""});h(async()=>{if(n.value)try{a.value=!0;const t=await T(l.params.id);s.value.name=t.name}catch(t){console.error("Failed to fetch category data:",t),r.value="Không tìm thấy danh mục."}finally{a.value=!1}});const _=async()=>{a.value=!0,r.value=null;try{n.value?(await B(l.params.id,s.value),console.log("update category oke")):(await C(s.value),console.log("add category oke")),m.push({name:"admin-categories"})}catch(t){console.error("Submit failed:",t),r.value=t.message||"Đã có lỗi xảy ra."}finally{a.value=!1}};return(t,o)=>(d(),c("div",null,[e("div",S,[e("h1",null,p(y.value),1)]),e("div",V,[a.value?(d(),c("div",F,"Đang tải...")):(d(),c("form",{key:1,onSubmit:b(_,["prevent"])},[e("div",I,[o[2]||(o[2]=e("label",{for:"name"},"Tên danh mục",-1)),k(e("input",{"onUpdate:modelValue":o[0]||(o[0]=v=>s.value.name=v),type:"text",id:"name",class:"form-input",required:""},null,512),[[w,s.value.name]])]),e("div",E,[e("button",{type:"button",class:"btn",onClick:o[1]||(o[1]=v=>x(m).back()),style:{"background-color":"#6B7280",color:"white"}},"Hủy"),e("button",{type:"submit",class:"btn btn-primary",disabled:a.value},p(a.value?"Đang xử lý...":g.value),9,H)])],32))])]))}},L=f(N,[["__scopeId","data-v-5064e7e1"]]);export{L as default};
