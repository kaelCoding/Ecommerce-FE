import{u as y,e as b,c as l,a as n,h as e,n as r,b as k,F as D,i as v,j as _,o as a,t as u,p as w,L as M}from"./index-Cmxnodc5.js";import{u as B}from"./admin-DXZmpeVg.js";import{u as x,C as L}from"./ConfirmationModal-Dhbxv4Qv.js";import"./category-CMg7OFEH.js";const N={class:"content-area"},S={class:"content-header"},V={class:"table-responsive"},I={class:"admin-table"},T={key:1},F={class:"table-actions center"},X=["onClick"],$=["onClick"],q={__name:"CategoryListView",setup(E){const{showNotification:c}=y(),d=w(),o=B(),{isConfirmModalVisible:m,showConfirmModal:h,cancelDelete:f,confirmDelete:p}=x(async i=>{try{await o.deleteCategory(i),c("Xóa danh mục thành công!")}catch(t){console.error("Failed to delete category:",t),c(t.message||t,"error")}});b(async()=>{await o.fetchCategories()});const g=i=>{d.push({name:"admin-categories-edit",params:{id:i}})};return(i,t)=>(a(),l("div",null,[t[6]||(t[6]=n("div",{class:"main-header"},[n("h1",null,"Danh Mục")],-1)),n("div",N,[n("div",S,[t[2]||(t[2]=n("h2",null,"Danh sách Danh Mục",-1)),n("button",{class:"btn-primary",onClick:t[0]||(t[0]=s=>e(d).push({name:"admin-categories-new"}))},t[1]||(t[1]=[n("i",{class:"fas fa-plus"},null,-1),r(" Thêm Mới ")]))]),n("div",V,[n("table",I,[t[5]||(t[5]=n("thead",null,[n("tr",null,[n("th",null,"ID"),n("th",null,"Tên Danh Mục"),n("th",null,"Hành động")])],-1)),e(o).isLoading.categories?(a(),k(M,{key:0,message:"Đang tải..."})):(a(),l("tbody",T,[(a(!0),l(D,null,v(e(o).categories,s=>(a(),l("tr",{key:s.id},[n("td",null,u(s.ID),1),n("td",null,u(s.name),1),n("td",null,[n("div",F,[n("button",{class:"btn-primary",onClick:C=>g(s.ID)},t[3]||(t[3]=[n("i",{class:"fas fa-edit"},null,-1),r(),n("span",null,"Sửa",-1)]),8,X),n("button",{class:"btn-primary",onClick:C=>e(h)(s.ID)},t[4]||(t[4]=[n("i",{class:"fas fa-trash"},null,-1),r(),n("span",null,"Xóa",-1)]),8,$)])])]))),128))]))])])]),_(L,{show:e(m),title:"Xác nhận xóa danh mục",message:"Bạn có chắc chắn muốn xóa danh mục này không? Hành động này không thể hoàn tác.",onConfirm:e(p),onCancel:e(f)},null,8,["show","onConfirm","onCancel"])]))}};export{q as default};
