import{_ as F,u as L,a as T,r as l,i as M,H as m,c as n,d as a,t as C,f as B,e as v,E as k,w,F as D,l as I,g as x,I as H,J as N,x as U,o,L as b}from"./index-B0cCL04z.js";import{g as q}from"./category-B4abgVIq.js";import{C as E}from"./Card-DG9Vpa1z.js";const G={class:"container"},K={class:"page-header"},O={class:"category-description"},V={class:"product-layout"},$={class:"sidebar"},z={class:"sidebar-widget"},J={key:1,class:"category-list"},Q=["onClick"],R={class:"main-content"},j={class:"toolbar"},W={class:"sort-filter"},X={key:1,class:"no-products-state"},Y={key:2,class:"product-grid"},Z={__name:"ListProduct",setup(ee){const{t:P}=L(),{showNotification:g}=T(),_=U(),f=l([]),d=l([]),p=l([]),i=l(!0),h=l(!0),r=l(null),c=l("newest"),S=async()=>{try{f.value=await q()}catch(t){g(t,"error")}finally{h.value=!1}},A=async()=>{i.value=!0;try{p.value=await N();const t=_.query.category;t&&(r.value=parseInt(t,10)),u()}catch(t){g(t,"error")}finally{i.value=!1}},y=t=>{r.value=t,u()},u=()=>{let t=[];switch(r.value===null?t=[...p.value]:t=p.value.filter(e=>e.categories.some(s=>s.ID===r.value)),c.value){case"price-asc":t.sort((e,s)=>parseFloat(e.price)-parseFloat(s.price));break;case"price-desc":t.sort((e,s)=>parseFloat(s.price)-parseFloat(e.price));break;case"oldest":t.sort((e,s)=>new Date(e.CreatedAt)-new Date(s.CreatedAt));break;case"newest":default:t.sort((e,s)=>new Date(s.CreatedAt)-new Date(e.CreatedAt));break}d.value=t};return M(async()=>{await Promise.all([S(),A()])}),m(c,u),m(()=>_.query.category,t=>{t?r.value=parseInt(t,10):r.value=null,u()}),(t,e)=>(o(),n("div",null,[a("div",G,[a("div",K,[e[2]||(e[2]=a("h1",{class:"page-title"},"TẤT CẢ MÔ HÌNH - ĐỒ CHƠI TOKUSATSU",-1)),a("p",O,C(B(P)("listProduct.categoryDescription")),1)]),a("div",V,[a("aside",$,[a("div",z,[e[3]||(e[3]=a("h3",{class:"widget-title"},"Danh Mục Sản Phẩm",-1)),h.value?(o(),v(b,{key:0,message:"Đang tải..."})):(o(),n("ul",J,[a("li",null,[a("a",{href:"#",onClick:e[0]||(e[0]=w(s=>y(null),["prevent"])),class:k({active:r.value===null})}," Tất Cả Sản Phẩm ",2)]),(o(!0),n(D,null,I(f.value,s=>(o(),n("li",{key:s.ID},[a("a",{href:"#",onClick:w(te=>y(s.ID),["prevent"]),class:k({active:r.value===s.ID})},C(s.name),11,Q)]))),128))]))])]),a("main",R,[a("div",j,[a("div",W,[x(a("select",{id:"sort-by","onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),class:"form-input"},[...e[4]||(e[4]=[a("option",{value:"newest"},"Mới nhất",-1),a("option",{value:"oldest"},"Cũ nhất",-1),a("option",{value:"price-asc"},"Giá: Thấp đến Cao",-1),a("option",{value:"price-desc"},"Giá: Cao đến Thấp",-1)])],512),[[H,c.value]])])]),i.value?(o(),v(b,{key:0,message:"Đang tải sản phẩm..."})):!i.value&&d.value.length===0?(o(),n("div",X,[...e[5]||(e[5]=[a("p",null,"Không có sản phẩm nào để hiển thị.",-1)])])):(o(),n("div",Y,[(o(!0),n(D,null,I(d.value,s=>(o(),v(E,{key:s.ID,product:s},null,8,["product"]))),128))]))])])])]))}},re=F(Z,[["__scopeId","data-v-08c2ef70"]]);export{re as default};
