import{_ as D,n as C,r as u,o as w,g as P,c as o,a as t,q as p,b as d,d as V,F as N,e as x,y as B,N as I,f as l,G as L,t as h,D as T,u as S,L as F}from"./index-C2scuJsD.js";import{C as M}from"./ConfirmationModal-0Te8oBmm.js";const X={class:"container"},$={class:"content-area"},E={class:"content-header"},G={class:"table-responsive"},H={class:"admin-table"},q={key:1},R=["src","alt"],j={class:"table-actions center"},z=["onClick"],A=["onClick"],J={__name:"ProductListView",setup(K){const{showNotification:c}=C(),m=S(),f=u(!0),i=u(!1),a=u(null),r=u([]);w(async()=>{await v(),f.value=!1});const v=async()=>{try{const n=await P();r.value=n}catch(n){console.error("Failed to get products:",n),c("Tải danh sách sản phẩm thất bại.","error")}},_=n=>{m.push({name:"admin-products-edit",params:{id:n}})},g=n=>{a.value=n,i.value=!0},y=async()=>{if(i.value=!1,!!a.value)try{await I(a.value),r.value=r.value.filter(n=>n.ID!==a.value),c("Xóa sản phẩm thành công!")}catch(n){console.error("Failed to delete product:",n),c("Xóa sản phẩm thất bại. Vui lòng thử lại.","error")}finally{a.value=null}},b=()=>{i.value=!1,a.value=null};return(n,e)=>(l(),o("div",X,[e[6]||(e[6]=t("div",{class:"main-header"},[t("h1",null,"Sản Phẩm")],-1)),t("div",$,[t("div",E,[e[2]||(e[2]=t("h2",null,"Danh sách Sản Phẩm",-1)),t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=s=>p(m).push({name:"admin-products-new"}))},e[1]||(e[1]=[t("i",{class:"fas fa-plus"},null,-1),d(" Thêm Mới ")]))]),t("div",G,[t("table",H,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"Ảnh"),t("th",null,"Tên"),t("th",null,"Danh mục"),t("th",null,"Giá"),t("th",null,"Hành động")])],-1)),f.value?(l(),V(F,{key:0,message:"Đang tải..."})):(l(),o("tbody",q,[(l(!0),o(N,null,x(r.value,s=>(l(),o("tr",{key:s.ID},[t("td",null,[s.image_urls&&s.image_urls.length>0?(l(),o("img",{key:0,src:s.image_urls[0],alt:s.name,class:"table-img"},null,8,R)):L("",!0)]),t("td",null,h(s.name),1),t("td",null,h(s.category_name),1),t("td",null,h(p(T)(s.price)),1),t("td",null,[t("div",j,[t("button",{class:"btn-primary",onClick:k=>_(s.ID)},e[3]||(e[3]=[t("i",{class:"fas fa-edit"},null,-1),d(),t("span",null,"Sửa",-1)]),8,z),t("button",{class:"btn-primary",onClick:k=>g(s.ID)},e[4]||(e[4]=[t("i",{class:"fas fa-trash"},null,-1),d(),t("span",null,"Xóa",-1)]),8,A)])])]))),128))]))])])]),B(M,{show:i.value,title:"Xác nhận xóa sản phẩm",message:"Bạn có chắc chắn muốn xóa sản phẩm này không? Hành động này không thể hoàn tác.",onConfirm:y,onCancel:b},null,8,["show"])]))}},U=D(J,[["__scopeId","data-v-57c0796e"]]);export{U as default};
