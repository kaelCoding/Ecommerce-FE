import{u as _,r as i,e as b,c,a as e,B as k,l as d,b as w,F as B,g as M,h as I,o as l,t as f,m as x,L}from"./index-B1juKSnc.js";import{g as N,d as T}from"./category-SBm5JwaE.js";import{C as V}from"./ConfirmationModal-CRdSxmE0.js";const F={class:"content-area"},S={class:"content-header"},X={class:"table-responsive"},$={class:"admin-table"},E={key:1},H={class:"table-actions center"},R=["onClick"],j=["onClick"],J={__name:"CategoryListView",setup(q){const{showNotification:u}=_(),h=x(),m=i(!0),o=i(!1),a=i(null),r=i([]);b(async()=>{await g(),m.value=!1});const g=async()=>{try{const n=await N();r.value=n}catch(n){console.error("Failed to get categorys:",n),u(n,"error")}},v=n=>{h.push({name:"admin-categories-edit",params:{id:n}})},p=n=>{a.value=n,o.value=!0},y=async()=>{if(o.value=!1,!!a.value)try{await T(a.value),r.value=r.value.filter(n=>n.ID!==a.value),u("Xóa danh mục thành công!")}catch(n){console.error("Failed to delete category:",n),u(n,"error")}finally{a.value=null}},C=()=>{o.value=!1,a.value=null};return(n,t)=>(l(),c("div",null,[t[6]||(t[6]=e("div",{class:"main-header"},[e("h1",null,"Danh Mục")],-1)),e("div",F,[e("div",S,[t[2]||(t[2]=e("h2",null,"Danh sách Danh Mục",-1)),e("button",{class:"btn-primary",onClick:t[0]||(t[0]=s=>k(h).push({name:"admin-categories-new"}))},t[1]||(t[1]=[e("i",{class:"fas fa-plus"},null,-1),d(" Thêm Mới ")]))]),e("div",X,[e("table",$,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Tên Danh Mục"),e("th",null,"Hành động")])],-1)),m.value?(l(),w(L,{key:0,message:"Đang tải..."})):(l(),c("tbody",E,[(l(!0),c(B,null,M(r.value,s=>(l(),c("tr",{key:s.id},[e("td",null,f(s.ID),1),e("td",null,f(s.name),1),e("td",null,[e("div",H,[e("button",{class:"btn-primary",onClick:D=>v(s.ID)},t[3]||(t[3]=[e("i",{class:"fas fa-edit"},null,-1),d(),e("span",null,"Sửa",-1)]),8,R),e("button",{class:"btn-primary",onClick:D=>p(s.ID)},t[4]||(t[4]=[e("i",{class:"fas fa-trash"},null,-1),d(),e("span",null,"Xóa",-1)]),8,j)])])]))),128))]))])])]),I(V,{show:o.value,title:"Xác nhận xóa danh mục",message:"Bạn có chắc chắn muốn xóa danh mục này không? Hành động này không thể hoàn tác.",onConfirm:y,onCancel:C},null,8,["show"])]))}};export{J as default};
