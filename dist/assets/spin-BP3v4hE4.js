import{Q as s,a as o,R as h}from"./index-BvrMabg1.js";const c=async r=>{try{return await s("POST","/spin",{shippingCode:r})}catch(t){throw t}},d=async()=>{try{return await s("GET","/rewards")}catch(r){throw r}},l=async r=>{try{return await s("POST","/admin/rewards",r)}catch(t){throw t}},w=async(r,t)=>{try{return await s("PUT",`/admin/rewards/${r}`,t)}catch(a){throw a}},u=async r=>{try{return await s("DELETE",`/admin/rewards/${r}`)}catch(t){throw t}},{showNotification:e}=o(),y=h("spin",{state:()=>({rewards:[],isLoading:{all:!1,spin:!1},error:null}),actions:{async fetchRewards(){this.isLoading.all=!0,this.error=null;try{const r=await d();this.rewards=r||[]}catch(r){this.error=r||"Failed to fetch rewards.",e(this.error,"error")}finally{this.isLoading.all=!1}},async addReward(r){this.isLoading.all=!0,this.error=null;try{const t=await l(r);this.rewards.push(t.reward),e("Phần thưởng đã được thêm thành công!","success")}catch(t){throw this.error=t||"Failed to add reward.",e(this.error,"error"),new Error(this.error)}finally{this.isLoading.all=!1}},async updateReward(r,t){this.isLoading.all=!0,this.error=null;try{const a=await w(r,t),i=this.rewards.findIndex(n=>n.ID===r);i!==-1&&(this.rewards[i]=a.reward),e("Phần thưởng đã được cập nhật thành công!","success")}catch(a){throw this.error=a||"Failed to update reward.",e(this.error,"error"),new Error(this.error)}finally{this.isLoading.all=!1}},async deleteReward(r){this.isLoading.all=!0,this.error=null;try{await u(r),this.rewards=this.rewards.filter(t=>t.ID!==r),e("Phần thưởng đã được xóa thành công!","success")}catch(t){throw this.error=t||"Failed to delete reward.",e(this.error,"error"),new Error(this.error)}finally{this.isLoading.all=!1}},async spinWheel(r){this.isLoading.spin=!0,this.error=null;try{const t=await c(r);return e("Chúc mừng! Bạn đã trúng thưởng!","success"),t.reward}catch(t){return this.error=t||"Failed to spin the wheel.",e(this.error,"error"),null}finally{this.isLoading.spin=!1}}}});export{y as u};
