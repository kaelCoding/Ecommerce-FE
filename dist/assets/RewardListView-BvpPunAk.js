import{u as b}from"./spin-B0oTRej4.js";import{_ as w,r as x,B as D,c as i,d as n,k as u,l as L,e as s,F as V,j as S,m as h,f as T,n as B,o as l,p as c,t as d,G as I,b as M,L as R}from"./index-B5h7-xYU.js";import{u as F,C as N}from"./ConfirmationModal-CMIskdt4.js";const P={class:"container"},q={class:"content-area"},E={class:"content-header"},G={class:"table-responsive"},H={class:"admin-table"},X={key:0},$={key:0},j={class:"optional-col"},Q={class:"table-actions"},z=["onClick"],A=["onClick"],J={__name:"RewardListView",setup(K){const a=b(),m=M(),r=x(null),{isConfirmModalVisible:p,showConfirmModal:f,cancelDelete:_}=F(),g=o=>{r.value=o,f()},y=async()=>{if(r.value!==null)try{await a.deleteReward(r.value)}catch(o){console.error("Failed to delete reward:",o)}finally{r.value=null}},k=o=>{m.push({name:"admin-rewards-edit",params:{id:o}})};return D(()=>{a.fetchRewards()}),(o,t)=>{const C=B("router-link");return l(),i("div",P,[t[6]||(t[6]=n("div",{class:"main-header"},[n("h1",null,"Phần Thưởng Vòng Quay")],-1)),n("div",q,[n("div",E,[t[1]||(t[1]=n("h2",null,"Danh sách Phần thưởng",-1)),u(C,{to:{name:"admin-rewards-new"},class:"btn btn-primary"},{default:L(()=>t[0]||(t[0]=[n("i",{class:"fas fa-plus"},null,-1),c(" Thêm Mới ")])),_:1})]),n("div",G,[n("table",H,[t[5]||(t[5]=n("thead",null,[n("tr",null,[n("th",null,"Tên"),n("th",{class:"optional-col"},"Giá trị"),n("th",null,"SL"),n("th",null,"Tỉ lệ"),n("th",null,"Hành động")])],-1)),s(a).isLoading.all?h("",!0):(l(),i("tbody",X,[!s(a).rewards||s(a).rewards.length===0?(l(),i("tr",$,t[2]||(t[2]=[n("td",{colspan:"5",style:{"text-align":"center",padding:"2rem"}},"Chưa có phần thưởng nào.",-1)]))):(l(!0),i(V,{key:1},S(s(a).rewards,e=>(l(),i("tr",{key:e.ID},[n("td",null,d(e.name),1),n("td",j,d(s(I)(e.value)),1),n("td",null,d(e.quantity===-1?"∞":e.quantity),1),n("td",null,d((e.probability*100).toFixed(1))+"%",1),n("td",null,[n("div",Q,[n("button",{class:"btn-primary",onClick:v=>k(e.ID)},t[3]||(t[3]=[n("i",{class:"fas fa-edit"},null,-1),c(),n("span",null,"Sửa",-1)]),8,z),n("button",{class:"btn-primary",onClick:v=>g(e.ID)},t[4]||(t[4]=[n("i",{class:"fas fa-trash"},null,-1),c(),n("span",null,"Xóa",-1)]),8,A)])])]))),128))]))]),s(a).isLoading.all?(l(),T(R,{key:0,message:"Đang tải..."})):h("",!0)])]),u(N,{show:s(p),title:"Xác nhận xóa phần thưởng",message:"Bạn có chắc chắn muốn xóa phần thưởng này không? Hành động này không thể hoàn tác.",onConfirm:y,onCancel:s(_)},null,8,["show","onCancel"])])}}},Y=w(J,[["__scopeId","data-v-f2104d74"]]);export{Y as default};
