import{u as b,e as k,c as o,a as n,g as e,m as r,b as y,F as C,h as v,i as D,o as a,k as w,t as c,G as P,n as S,L as B}from"./index-DQuDyKue.js";import{u as N}from"./admin-CYxKsELy.js";import{u as V,C as x}from"./ConfirmationModal-BL49Ob0i.js";import"./category-BI0ApnDw.js";const L={class:"container"},M={class:"content-area"},T={class:"content-header"},F={class:"table-responsive"},I={class:"admin-table"},X={key:1},$=["src","alt"],E={class:"table-actions center"},G=["onClick"],H=["onClick"],J={__name:"ProductListView",setup(A){const{showNotification:m}=b(),u=S(),l=N(),{isConfirmModalVisible:d,showConfirmModal:h,cancelDelete:f,confirmDelete:g}=V(async i=>{try{await l.deleteProduct(i),m("Xóa sản phẩm thành công!")}catch(t){console.error("Failed to delete product:",t),m(t.message||t,"error")}});k(async()=>{await l.fetchProducts()});const p=i=>{u.push({name:"admin-products-edit",params:{id:i}})};return(i,t)=>(a(),o("div",L,[t[6]||(t[6]=n("div",{class:"main-header"},[n("h1",null,"Sản Phẩm")],-1)),n("div",M,[n("div",T,[t[2]||(t[2]=n("h2",null,"Danh sách Sản Phẩm",-1)),n("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=s=>e(u).push({name:"admin-products-new"}))},t[1]||(t[1]=[n("i",{class:"fas fa-plus"},null,-1),r(" Thêm Mới ")]))]),n("div",F,[n("table",I,[t[5]||(t[5]=n("thead",null,[n("tr",null,[n("th",null,"Ảnh"),n("th",null,"Tên"),n("th",null,"Danh mục"),n("th",null,"Giá"),n("th",null,"Hành động")])],-1)),e(l).isLoading.products?(a(),y(B,{key:0,message:"Đang tải..."})):(a(),o("tbody",X,[(a(!0),o(C,null,v(e(l).products,s=>(a(),o("tr",{key:s.ID},[n("td",null,[s.image_urls&&s.image_urls.length>0?(a(),o("img",{key:0,src:s.image_urls[0],alt:s.name,class:"table-img"},null,8,$)):w("",!0)]),n("td",null,c(s.name),1),n("td",null,c(s.category_name),1),n("td",null,c(e(P)(s.price)),1),n("td",null,[n("div",E,[n("button",{class:"btn-primary",onClick:_=>p(s.ID)},t[3]||(t[3]=[n("i",{class:"fas fa-edit"},null,-1),r(),n("span",null,"Sửa",-1)]),8,G),n("button",{class:"btn-primary",onClick:_=>e(h)(s.ID)},t[4]||(t[4]=[n("i",{class:"fas fa-trash"},null,-1),r(),n("span",null,"Xóa",-1)]),8,H)])])]))),128))]))])])]),D(x,{show:e(d),title:"Xác nhận xóa sản phẩm",message:"Bạn có chắc chắn muốn xóa sản phẩm này không? Hành động này không thể hoàn tác.",onConfirm:e(g),onCancel:e(f)},null,8,["show","onConfirm","onCancel"])]))}};export{J as default};
