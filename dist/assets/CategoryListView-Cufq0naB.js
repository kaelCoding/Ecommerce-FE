import{_ as C,m as D,r as i,o as k,c,a as e,p as w,q as d,b as I,F as M,d as V,y as x,e as l,t as f,u as B,L}from"./index-B4XQbLVi.js";import{g as T,d as N}from"./category-DggWTtiu.js";import{C as F}from"./ConfirmationModal-BGICfWL_.js";const X={class:"content-area"},S={class:"content-header"},$={class:"table-responsive"},E={class:"admin-table"},H={key:1},q={class:"table-actions center"},R=["onClick"],j=["onClick"],z={__name:"CategoryListView",setup(A){const{showNotification:u}=D(),h=B(),m=i(!0),o=i(!1),a=i(null),r=i([]);k(async()=>{await g(),m.value=!1});const g=async()=>{try{const n=await T();r.value=n}catch(n){console.error("Failed to get categorys:",n),u("Tải danh sách danh mục thất bại.","error")}},v=n=>{h.push({name:"admin-categories-edit",params:{id:n}})},p=n=>{a.value=n,o.value=!0},y=async()=>{if(o.value=!1,!!a.value)try{await N(a.value),r.value=r.value.filter(n=>n.ID!==a.value),u("Xóa danh mục thành công!")}catch(n){console.error("Failed to delete category:",n),u("Xóa danh mục thất bại. Vui lòng thử lại.","error")}finally{a.value=null}},_=()=>{o.value=!1,a.value=null};return(n,t)=>(l(),c("div",null,[t[6]||(t[6]=e("div",{class:"main-header"},[e("h1",null,"Danh Mục")],-1)),e("div",X,[e("div",S,[t[2]||(t[2]=e("h2",null,"Danh sách Danh Mục",-1)),e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=s=>w(h).push({name:"admin-categories-new"}))},t[1]||(t[1]=[e("i",{class:"fas fa-plus"},null,-1),d(" Thêm Mới ")]))]),e("div",$,[e("table",E,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Tên Danh Mục"),e("th",null,"Hành động")])],-1)),m.value?(l(),I(L,{key:0,message:"Đang tải..."})):(l(),c("tbody",H,[(l(!0),c(M,null,V(r.value,s=>(l(),c("tr",{key:s.id},[e("td",null,f(s.ID),1),e("td",null,f(s.name),1),e("td",null,[e("div",q,[e("button",{class:"btn-primary",onClick:b=>v(s.ID)},t[3]||(t[3]=[e("i",{class:"fas fa-edit"},null,-1),d(),e("span",null,"Sửa",-1)]),8,R),e("button",{class:"btn-primary",onClick:b=>p(s.ID)},t[4]||(t[4]=[e("i",{class:"fas fa-trash"},null,-1),d(),e("span",null,"Xóa",-1)]),8,j)])])]))),128))]))])])]),x(F,{show:o.value,title:"Xác nhận xóa danh mục",message:"Bạn có chắc chắn muốn xóa danh mục này không? Hành động này không thể hoàn tác.",onConfirm:y,onCancel:_},null,8,["show"])]))}},O=C(z,[["__scopeId","data-v-bb675d86"]]);export{O as default};
