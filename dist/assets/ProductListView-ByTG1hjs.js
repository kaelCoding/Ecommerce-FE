import{_ as k,a as C,i as v,c as o,d as s,m as D,f as e,q as c,e as w,F as h,l as _,b as P,o as a,k as S,t as d,G as V,L as x}from"./index-B0cCL04z.js";import{u as B}from"./admin-DlmSrlVb.js";import{u as L,C as M}from"./ConfirmationModal-DlaCKoqu.js";import"./category-B4abgVIq.js";const N={class:"container"},I={class:"content-area"},T={class:"content-header"},F={class:"table-responsive"},X={class:"admin-table"},$={key:1},E=["src","alt"],H={class:"name-ctn"},q={class:"price-mobile"},A={class:"category-tags"},G={class:"table-actions center"},R=["onClick"],j=["onClick"],z={__name:"ProductListView",setup(J){const{showNotification:m}=C(),u=P(),l=B(),{isConfirmModalVisible:f,showConfirmModal:p,cancelDelete:g,confirmDelete:b}=L(async i=>{try{await l.deleteProduct(i),m("Xóa sản phẩm thành công!")}catch(n){console.error("Failed to delete product:",n),m(n.message||n,"error")}});v(async()=>{await l.fetchProducts()});const y=i=>{u.push({name:"admin-products-edit",params:{id:i}})};return(i,n)=>(a(),o("div",N,[n[6]||(n[6]=s("div",{class:"main-header"},[s("h1",null,"Sản Phẩm")],-1)),s("div",I,[s("div",T,[n[2]||(n[2]=s("h2",null,"Danh sách Sản Phẩm",-1)),s("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=t=>e(u).push({name:"admin-products-new"}))},[...n[1]||(n[1]=[s("i",{class:"fas fa-plus"},null,-1),c(" Thêm Mới ",-1)])])]),s("div",F,[s("table",X,[n[5]||(n[5]=s("thead",null,[s("tr",null,[s("th",null,"Ảnh"),s("th",{class:"name-ctn"},"Tên"),s("th",null,"Danh Mục"),s("th",null,"Hành động")])],-1)),e(l).isLoading.products?(a(),w(x,{key:0,message:"Đang tải..."})):(a(),o("tbody",$,[(a(!0),o(h,null,_(e(l).products,t=>(a(),o("tr",{key:t.ID},[s("td",null,[t.image_urls&&t.image_urls.length>0?(a(),o("img",{key:0,src:t.image_urls[0],alt:t.name,class:"table-img"},null,8,E)):S("",!0)]),s("td",H,[c(d(t.name)+" ",1),s("div",q,d(e(V)(t.price)),1)]),s("td",null,[s("div",A,[(a(!0),o(h,null,_(t.categories,r=>(a(),o("span",{key:r.ID,class:"category-tag"},d(r.name),1))),128))])]),s("td",null,[s("div",G,[s("button",{class:"btn-primary",onClick:r=>y(t.ID)},[...n[3]||(n[3]=[s("i",{class:"fas fa-edit"},null,-1),c(),s("span",null,"Sửa",-1)])],8,R),s("button",{class:"btn-primary",onClick:r=>e(p)(t.ID)},[...n[4]||(n[4]=[s("i",{class:"fas fa-trash"},null,-1),c(),s("span",null,"Xóa",-1)])],8,j)])])]))),128))]))])])]),D(M,{show:e(f),title:"Xác nhận xóa sản phẩm",message:"Bạn có chắc chắn muốn xóa sản phẩm này không? Hành động này không thể hoàn tác.",onConfirm:e(b),onCancel:e(g)},null,8,["show","onConfirm","onCancel"])]))}},W=k(z,[["__scopeId","data-v-18bd9bca"]]);export{W as default};
