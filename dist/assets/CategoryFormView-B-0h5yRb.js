import{_ as g,n as _,r as m,O as l,l as b,c as h,a,t as p,d as w,w as k,h as x,v as M,q as T,i as B,f as c,u as C,L as D}from"./index-C2scuJsD.js";import{a as S,u as N,b as V}from"./category-PExOklX5.js";const F={class:"main-header"},L={class:"content-area"},q={class:"form-group"},E={class:"form-action-buttons"},I=["disabled"],R={__name:"CategoryFormView",setup(H){const{showNotification:n}=_(),i=B(),u=C(),e=m(!1),r=l(()=>!!i.params.id),v=l(()=>r.value?"Sửa Danh Mục":"Thêm Danh Mục Mới"),f=l(()=>r.value?"Cập Nhật":"Thêm Danh Mục"),s=m({name:""});b(async()=>{if(r.value)try{e.value=!0;const t=await S(i.params.id);s.value.name=t.name}catch(t){console.error("Failed to fetch category data:",t),n("Không tìm thấy danh mục.","error")}finally{e.value=!1}});const y=async()=>{e.value=!0;try{r.value?(await N(i.params.id,s.value),n("Cập nhật danh mục thành công!")):(await V(s.value),n("Thêm danh mục thành công!")),u.push({name:"admin-categories"})}catch(t){console.error("Submit failed:",t),n("Đã có lỗi xảy ra.","error")}finally{e.value=!1}};return(t,o)=>(c(),h("div",null,[a("div",F,[a("h1",null,p(v.value),1)]),a("div",L,[e.value?(c(),w(D,{key:0,message:"Đang tải..."})):(c(),h("form",{key:1,onSubmit:k(y,["prevent"])},[a("div",q,[o[2]||(o[2]=a("label",{for:"name"},"Tên danh mục",-1)),x(a("input",{"onUpdate:modelValue":o[0]||(o[0]=d=>s.value.name=d),type:"text",id:"name",class:"form-input",placeholder:"Nhập danh mục",required:""},null,512),[[M,s.value.name]])]),a("div",E,[a("button",{type:"button",class:"btn",onClick:o[1]||(o[1]=d=>T(u).back()),style:{"background-color":"#6B7280",color:"white"}},"Hủy"),a("button",{type:"submit",class:"btn-primary",disabled:e.value},p(e.value?"Đang xử lý...":f.value),9,I)])],32))])]))}},U=g(R,[["__scopeId","data-v-93a081ab"]]);export{U as default};
