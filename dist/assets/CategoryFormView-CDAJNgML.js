import{u as g,r as m,O as l,n as _,c as h,a,t as p,d as b,w as k,b as w,v as x,x as M,k as T,o as c,j as D,L as S}from"./index-EtAjOJnX.js";import{b as B,u as C,c as N}from"./category-DNlFesr7.js";const L={class:"main-header"},V={class:"content-area"},E={class:"form-group"},F={class:"form-actions"},R=["disabled"],I={__name:"CategoryFormView",setup(j){const{showNotification:o}=g(),r=T(),u=D(),e=m(!1),i=l(()=>!!r.params.id),v=l(()=>i.value?"Sửa Danh Mục":"Thêm Danh Mục Mới"),f=l(()=>i.value?"Cập Nhật":"Thêm Danh Mục"),n=m({name:""});_(async()=>{if(i.value)try{e.value=!0;const t=await B(r.params.id);n.value.name=t.name}catch(t){console.error("Failed to fetch category data:",t),o("Không tìm thấy danh mục.","error")}finally{e.value=!1}});const y=async()=>{e.value=!0;try{i.value?(await C(r.params.id,n.value),o("Cập nhật danh mục thành công!")):(await N(n.value),o("Thêm danh mục thành công!")),u.push({name:"admin-categories"})}catch(t){console.error("Submit failed:",t),o("Đã có lỗi xảy ra.","error")}finally{e.value=!1}};return(t,s)=>(c(),h("div",null,[a("div",L,[a("h1",null,p(v.value),1)]),a("div",V,[e.value?(c(),b(S,{key:0,message:"Đang tải..."})):(c(),h("form",{key:1,onSubmit:k(y,["prevent"])},[a("div",E,[s[2]||(s[2]=a("label",{for:"name"},"Tên danh mục",-1)),w(a("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>n.value.name=d),type:"text",id:"name",class:"form-input",placeholder:"Nhập danh mục",required:""},null,512),[[x,n.value.name]])]),a("div",F,[a("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=d=>M(u).back())},"Hủy"),a("button",{type:"submit",class:"btn-primary",disabled:e.value},p(e.value?"Đang xử lý...":f.value),9,R)])],32))])]))}};export{I as default};
