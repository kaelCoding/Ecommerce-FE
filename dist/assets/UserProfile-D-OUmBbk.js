import{_ as D,r as b,A as x,B as F,z as K,c,d as w,b as t,t as a,i,m,C as M,p as C,D as Q,h as q,o as e,g as n,E as f,L as G}from"./index-B41N1OBt.js";const U={class:"user-profile-page container"},z={key:1,class:"profile-layout"},E={class:"profile-sidebar"},H={class:"profile-card user-info-card"},R={class:"profile-ctn"},A={class:"username"},O={class:"email"},Y={class:"overview-section"},$={class:"info-grid"},j={class:"info-item"},J={class:"info-value"},W={class:"info-item"},X={class:"info-value"},Z={key:0,class:"freeship-tag"},tt={class:"loyalty-content"},st={class:"profile-card vip-card"},nt={class:"vip-card-header"},it={class:"vip-level"},at={class:"current-level-text"},et={key:0,class:"progress-section"},lt={class:"progress-header"},ct={class:"progress-title"},ot={class:"progress-percentage"},rt={class:"progress-bar-container"},dt={class:"progress-remaining-text"},vt={key:1,class:"permanent-vip-message"},ut={key:0,class:"profile-card maintenance-card"},ht={class:"maintenance-info"},gt={class:"info-item"},pt={class:"info-value"},bt={class:"info-item"},mt={class:"info-value text-red-500 font-bold"},ft={class:"profile-card rules-accordion"},_t={key:0,class:"rules-container"},yt={__name:"UserProfile",setup(Vt){const _=b(!0),B=b(""),d=b(!1),g={1:1e6,2:25e5,3:5e6,4:8e6},y=x(()=>{if(!n.value||n.value.vipLevel>=4)return 100;const l=n.value.vipLevel,s=l+1,o=n.value.totalSpent;if(l===0){const h=g[s];return Math.min(100,o/h*100)}const r=g[l],v=g[s]-r,u=o-r;return Math.min(100,u/v*100)}),S=x(()=>{var s;return((s=n.value)==null?void 0:s.vipLevel)>=2});return F(async()=>{try{await K()}catch(l){console.error("Failed to fetch user info:",l),B.value="Không thể tải thông tin người dùng. Vui lòng thử lại."}finally{_.value=!1}}),(l,s)=>{var o,r,p,v,u,h,V,L,T,k,P,I,N;return e(),c("div",U,[_.value?(e(),w(G,{key:0,message:"Đang tải dữ liệu..."})):(e(),c("div",z,[t("aside",E,[t("div",H,[t("div",R,[s[1]||(s[1]=t("i",{class:"fa-solid fa-circle-user profile-icon"},null,-1)),t("div",null,[t("h1",A,a((o=i(n))==null?void 0:o.username),1),t("p",O,a((r=i(n))==null?void 0:r.email),1)])]),s[6]||(s[6]=t("div",{class:"divider"},null,-1)),t("div",Y,[s[5]||(s[5]=t("h2",{class:"section-title"},"Tổng quan",-1)),t("div",$,[t("div",j,[s[2]||(s[2]=t("span",{class:"info-label"},"Tổng chi tiêu",-1)),t("span",J,a(i(f)((p=i(n))==null?void 0:p.totalSpent)),1)]),t("div",W,[s[3]||(s[3]=t("span",{class:"info-label"},"Mức giảm giá",-1)),t("span",X,a((((v=i(n))==null?void 0:v.discountPercentage)*100).toFixed(0))+"%",1)]),S.value?(e(),c("div",Z,s[4]||(s[4]=[t("i",{class:"fa-solid fa-truck"},null,-1),t("span",null,"Freeship",-1)]))):m("",!0)])])])]),t("main",tt,[s[14]||(s[14]=t("h2",{class:"page-title"},"Chương Trình Khách Hàng Thân Thiết",-1)),t("div",st,[t("div",nt,[t("div",it,[s[7]||(s[7]=t("i",{class:"fa-solid fa-crown"},null,-1)),t("span",null,"VIP "+a((u=i(n))==null?void 0:u.vipLevel),1)]),t("p",at,a(((h=i(n))==null?void 0:h.vipLevel)===4?"Cấp bậc Vĩnh Viễn":"Cấp bậc hiện tại"),1)]),((V=i(n))==null?void 0:V.vipLevel)<4?(e(),c("div",et,[t("div",lt,[t("span",ct,"Lên VIP "+a(((L=i(n))==null?void 0:L.vipLevel)+1),1),t("span",ot,a(Math.round(y.value))+"%",1)]),t("div",rt,[t("div",{class:"progress-bar",style:M({width:y.value+"%"})},null,4)]),t("p",dt," Chi tiêu thêm "+a(i(f)((T=i(n))==null?void 0:T.nextLevelRequirement))+" để thăng hạng. ",1)])):(e(),c("div",vt,s[8]||(s[8]=[t("p",null,"Bạn đã đạt cấp bậc cao nhất. Cảm ơn bạn đã đồng hành cùng TUNI TOKU!",-1)])))]),((k=i(n))==null?void 0:k.vipLevel)>0&&((P=i(n))==null?void 0:P.vipLevel)<4?(e(),c("div",ut,[s[11]||(s[11]=t("h3",{class:"section-title"},"Duy trì cấp bậc",-1)),t("div",ht,[t("div",gt,[s[9]||(s[9]=t("span",{class:"info-label"},[t("i",{class:"fa-solid fa-clock"}),C(" Ngày hết hạn")],-1)),t("span",pt,a(new Date((I=i(n))==null?void 0:I.vipExpiryDate).toLocaleDateString()),1)]),t("div",bt,[s[10]||(s[10]=t("span",{class:"info-label"},[t("i",{class:"fa-solid fa-bullseye"}),C(" Cần chi tiêu")],-1)),t("span",mt,a(i(f)((N=i(n))==null?void 0:N.maintenanceRequirement)),1)])])])):m("",!0),t("div",ft,[t("button",{onClick:s[0]||(s[0]=Lt=>d.value=!d.value),class:"accordion-button"},[s[12]||(s[12]=t("h3",{class:"section-title"},"Thể lệ chương trình",-1)),t("i",{class:Q(["fa-solid fa-chevron-down",{"rotate-180":d.value}])},null,2)]),d.value?(e(),c("div",_t,s[13]||(s[13]=[q('<div class="rules-section" data-v-61c14b94><h3 data-v-61c14b94>1. Các Cấp Bậc VIP &amp; Quyền Lợi</h3><p data-v-61c14b94>Hành trình của bạn sẽ đi qua 4 cấp bậc, mỗi cấp độ sẽ mang lại một mức chiết khấu vĩnh viễn trên mọi đơn hàng.</p><ul class="vip-list" data-v-61c14b94><li data-v-61c14b94><strong data-v-61c14b94>VIP 1</strong><ul data-v-61c14b94><li data-v-61c14b94><strong data-v-61c14b94>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 1 triệu VNĐ.</li><li data-v-61c14b94><strong data-v-61c14b94>Quyền lợi:</strong> Giảm 2% trên mọi đơn hàng.</li></ul></li><li data-v-61c14b94><strong data-v-61c14b94>VIP 2</strong><ul data-v-61c14b94><li data-v-61c14b94><strong data-v-61c14b94>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 2,5 triệu VNĐ.</li><li data-v-61c14b94><strong data-v-61c14b94>Quyền lợi:</strong> Giảm 3% trên mọi đơn hàng + Freeship.</li></ul></li><li data-v-61c14b94><strong data-v-61c14b94>VIP 3</strong><ul data-v-61c14b94><li data-v-61c14b94><strong data-v-61c14b94>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 5 triệu VNĐ.</li><li data-v-61c14b94><strong data-v-61c14b94>Quyền lợi:</strong> Giảm 5% trên mọi đơn hàng + Freeship.</li></ul></li><li data-v-61c14b94><strong data-v-61c14b94>VIP 4 (Vĩnh Viễn)</strong><ul data-v-61c14b94><li data-v-61c14b94><strong data-v-61c14b94>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 8 triệu VNĐ.</li><li data-v-61c14b94><strong data-v-61c14b94>Quyền lợi:</strong> Giảm 7% trên mọi đơn hàng trọn đời! + Freeship.</li></ul></li></ul></div><hr class="rules-divider" data-v-61c14b94><div class="rules-section" data-v-61c14b94><h3 data-v-61c14b94>2. Quy Tắc Duy Trì Cấp Bậc</h3><p data-v-61c14b94>Để đảm bảo bạn luôn nhận được những ưu đãi tốt nhất, các cấp bậc VIP 1, 2 và 3 có một quy tắc duy trì đơn giản:</p><ul class="maintenance-list" data-v-61c14b94><li data-v-61c14b94><strong data-v-61c14b94>Thời hạn duy trì:</strong> Kể từ khi bạn đạt một cấp VIP mới, bạn sẽ có 3 tháng để duy trì cấp bậc đó.</li><li data-v-61c14b94><strong data-v-61c14b94>Yêu cầu duy trì:</strong> Trong vòng 3 tháng này, bạn chỉ cần chi tiêu một khoản tiền bằng 30% giá trị ban đầu của cấp bậc đó. Khi bạn hoàn thành yêu cầu này, cấp bậc của bạn sẽ được duy trì thêm 3 tháng nữa. <ul data-v-61c14b94><li data-v-61c14b94><em data-v-61c14b94>Ví dụ:</em> Khi bạn đạt VIP 1 (với 1 triệu VNĐ), bạn chỉ cần chi tiêu thêm 300.000 VNĐ trong 3 tháng để duy trì cấp VIP 1.</li><li data-v-61c14b94>Khi bạn đạt VIP 2 (với 2.5 triệu VNĐ), bạn chỉ cần chi tiêu thêm 750.000 VNĐ trong 3 tháng để duy trì cấp VIP 2.</li></ul></li><li data-v-61c14b94><strong data-v-61c14b94>Thăng hạng tự động:</strong> Nếu trong 3 tháng này, bạn chi tiêu đủ số tiền của cấp tiếp theo, bạn sẽ được thăng hạng ngay lập tức và chu kỳ 3 tháng mới sẽ bắt đầu.</li><li data-v-61c14b94><strong data-v-61c14b94>Hạ cấp:</strong> Nếu không đạt đủ yêu cầu duy trì, bạn sẽ trở về cấp bậc trước đó.</li></ul></div>',3)]))):m("",!0)])])]))])}}},kt=D(yt,[["__scopeId","data-v-61c14b94"]]);export{kt as default};
