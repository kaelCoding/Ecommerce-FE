import{_ as T,K as w,a as q,c,d as t,e as x,k as g,f as o,m as b,p as y,F as v,l as k,t as n,n as D,b as P,o as i,q as f,G as l,L as N}from"./index-B0cCL04z.js";const S={class:"container cart-page"},V={key:1,class:"cart-empty card-white"},G={key:2,class:"cart-content card-white"},$={class:"cart-table-desktop"},B={class:"item-image-col"},F=["src","alt"],R={class:"item-details-col"},H={class:"item-name"},O={class:"item-category"},A={class:"item-price-col"},E={class:"item-price"},K={class:"item-quantity-col"},Q={class:"quantity-selector"},j=["onClick","disabled"],z=["value"],J=["onClick","disabled"],M={class:"item-subtotal-col"},U={class:"item-subtotal"},W={class:"item-remove-col"},X=["onClick","disabled"],Y={class:"cart-list-mobile"},Z={class:"item-main"},tt=["src","alt"],st={class:"item-details"},ot={class:"item-name"},at={class:"item-category"},et={class:"item-price"},nt={class:"item-footer"},it={class:"quantity-selector"},ct=["onClick","disabled"],lt=["value"],dt=["onClick","disabled"],rt={class:"item-subtotal"},ut=["onClick","disabled"],_t={class:"cart-summary"},pt={class:"summary-actions"},mt={class:"summary-total-wrapper"},ht={v_if:"cartStore.discountPercentage > 0",class:"summary-row"},gt={class:"original-price"},bt={key:0,class:"summary-row discount-row"},yt={class:"discount-amount"},vt={class:"summary-row final-total-row"},kt={class:"total-price"},ft=["disabled"],Ct={__name:"CartView",setup(It){const a=w(),{showNotification:C}=q(),I=P(),p=async(h,e)=>{if(!(e<0))try{await a.updateItemQuantity(h,e)}catch(m){C(m,"error")}},L=()=>{I.push("/checkout")};return(h,e)=>{const m=D("RouterLink");return i(),c("div",S,[e[8]||(e[8]=t("h1",{class:"page-title"},"GIỎ HÀNG CỦA BẠN",-1)),o(a).isLoading?(i(),x(N,{key:0,message:"Đang cập nhật giỏ hàng..."})):g("",!0),!o(a).isLoading&&o(a).items.length===0?(i(),c("div",V,[e[1]||(e[1]=t("p",null,"Giỏ hàng của bạn đang trống.",-1)),b(m,{to:"/products",class:"btn-primary"},{default:y(()=>[...e[0]||(e[0]=[f("Tiếp tục mua sắm",-1)])]),_:1})])):(i(),c("div",G,[t("table",$,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{colspan:"2"},"Sản phẩm"),t("th",null,"Giá"),t("th",null,"Số lượng"),t("th",null,"Tạm tính"),t("th")])],-1)),t("tbody",null,[(i(!0),c(v,null,k(o(a).items,s=>{var d,r,u;return i(),c("tr",{key:s.ID,class:"cart-item"},[t("td",B,[t("img",{src:(d=s.product.image_urls)==null?void 0:d[0],alt:s.product.name,class:"item-image"},null,8,F)]),t("td",R,[t("h3",H,n(s.product.name),1),t("p",O,n((u=(r=s.product.categories)==null?void 0:r[0])==null?void 0:u.name),1)]),t("td",A,[t("p",E,n(o(l)(s.product.price)),1)]),t("td",K,[t("div",Q,[t("button",{onClick:_=>p(s.ID,s.quantity-1),disabled:o(a).isLoading},"-",8,j),t("input",{type:"text",value:s.quantity,readonly:""},null,8,z),t("button",{onClick:_=>p(s.ID,s.quantity+1),disabled:o(a).isLoading},"+",8,J)])]),t("td",M,[t("p",U,n(o(l)(s.product.price*s.quantity)),1)]),t("td",W,[t("button",{onClick:_=>o(a).removeItem(s.ID),class:"btn-remove",disabled:o(a).isLoading},[...e[2]||(e[2]=[t("i",{class:"fas fa-trash"},null,-1)])],8,X)])])}),128))])]),t("div",Y,[(i(!0),c(v,null,k(o(a).items,s=>{var d,r,u;return i(),c("div",{key:s.ID,class:"cart-item-mobile"},[t("div",Z,[t("img",{src:(d=s.product.image_urls)==null?void 0:d[0],alt:s.product.name,class:"item-image"},null,8,tt),t("div",st,[t("h3",ot,n(s.product.name),1),t("p",at,n((u=(r=s.product.categories)==null?void 0:r[0])==null?void 0:u.name),1),t("p",et,n(o(l)(s.product.price)),1)])]),t("div",nt,[t("div",it,[t("button",{onClick:_=>p(s.ID,s.quantity-1),disabled:o(a).isLoading},"-",8,ct),t("input",{type:"text",value:s.quantity,readonly:""},null,8,lt),t("button",{onClick:_=>p(s.ID,s.quantity+1),disabled:o(a).isLoading},"+",8,dt)]),t("p",rt,n(o(l)(s.product.price*s.quantity)),1),t("button",{onClick:_=>o(a).removeItem(s.ID),class:"btn-remove",disabled:o(a).isLoading},[...e[4]||(e[4]=[t("i",{class:"fas fa-trash"},null,-1)])],8,ut)])])}),128))]),t("div",_t,[t("div",pt,[b(m,{to:"/products",class:"btn btn-secondary"},{default:y(()=>[...e[5]||(e[5]=[t("i",{class:"fas fa-arrow-left"},null,-1),f(" Tiếp tục xem sản phẩm ",-1)])]),_:1})]),t("div",mt,[t("div",ht,[e[6]||(e[6]=t("span",null,"Tạm tính (gốc):",-1)),t("span",gt,n(o(l)(o(a).cartOriginalTotalPrice)),1)]),o(a).discountPercentage>0?(i(),c("div",bt,[t("span",null,"Giảm giá VIP (-"+n((o(a).discountPercentage*100).toFixed(0))+"%):",1),t("span",yt,"-"+n(o(l)(o(a).cartOriginalTotalPrice-o(a).cartTotalPrice)),1)])):g("",!0),t("div",vt,[e[7]||(e[7]=t("span",{class:"total-label"},"Tổng cộng:",-1)),t("strong",kt,n(o(a).formattedCartTotalPrice),1)]),t("button",{class:"btn-primary btn-checkout",onClick:L,disabled:o(a).isLoading}," Tiến Hành Thanh Toán ",8,ft)])])]))])}}},Tt=T(Ct,[["__scopeId","data-v-d0843db1"]]);export{Tt as default};
