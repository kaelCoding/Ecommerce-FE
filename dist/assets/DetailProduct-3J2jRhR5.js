import{_ as L,u as G,r as d,n as I,q as O,c as r,d as g,a as t,F as _,g as P,t as u,x as T,y as c,f as z,i as E,z as K,T as Q,A as R,k as X,B as $,p as j,o as l,C as J,D as V,w,L as S,b as p,v as k,E as D,h as W}from"./index-BJN3KE9j.js";import{a as Y}from"./order-DIIFLt8u.js";import{P as Z}from"./Card-R64GBpuF.js";const tt={key:1,class:"page-state"},et={key:2,class:"container"},st={class:"main-content-grid"},at={class:"image-gallery"},nt={class:"main-image-wrapper"},lt=["src","alt"],ot={class:"thumbnail-list"},it=["src","onClick"],dt={class:"info-panel"},rt={class:"product-brand"},ut={class:"product-title"},ct={class:"product-price"},pt={class:"actions"},vt={class:"quantity-selector"},mt=["value"],ht={class:"extended-info-grid"},gt={class:"description-section"},ft={class:"pre-line-text"},yt={class:"related-products-section"},bt={class:"product-grid"},_t={class:"checkout-modal"},kt={class:"modal-body"},Ct={key:1},xt={class:"order-summary"},Mt={class:"form-group"},Nt={class:"form-group"},Pt={class:"form-group"},Tt={class:"form-group"},Vt={class:"payment-options"},wt={class:"radio-label"},St={class:"radio-label"},Dt={__name:"DetailProduct",setup(qt){const C=X(),{showNotification:f}=G(),a=d(null),x=d([]),v=d(!0),y=d(!1),o=d(1),m=d(""),b=d(!1),n=d({name:"",phone:"",address:"",paymentMethod:"cod"}),q=()=>o.value++,B=()=>{o.value>1&&o.value--},F=()=>{b.value=!0},h=()=>{b.value=!1},H=()=>{n.value={name:"",phone:"",address:"",paymentMethod:"cod"},o.value=1},U=async()=>{y.value=!0;const i={productName:a.value.name,quantity:o.value,totalPrice:a.value.price*o.value,customerName:n.value.name,customerPhone:n.value.phone,customerAddress:n.value.address,paymentMethod:n.value.paymentMethod};try{await Y(i),f("Đặt hàng thành công! Chúng tôi sẽ sớm liên hệ với bạn để xác nhận."),h(),H()}catch(e){console.error("Failed to submit order:",e),f("Gửi đơn hàng thất bại. Vui lòng thử lại.","error")}finally{y.value=!1}},M=async i=>{var e;if(!i){v.value=!1;return}v.value=!0;try{const[s,N]=await Promise.all([$(i),j()]);a.value=s,x.value=N,((e=a.value.image_urls)==null?void 0:e.length)>0&&(m.value=a.value.image_urls[0])}catch(s){console.error("Failed to fetch product data:",s),a.value=null,f("Không thể tải dữ liệu sản phẩm.","error")}finally{v.value=!1}};I(async()=>{M(C.params.id)}),O(()=>C.params.id,i=>{i&&(window.scrollTo(0,0),M(i))});const A=()=>{F()};return(i,e)=>(l(),r(_,null,[v.value?(l(),g(S,{key:0,message:"Đang tải..."})):a.value?(l(),r("div",et,[t("main",st,[t("div",at,[t("div",nt,[t("img",{src:m.value,alt:a.value.name,class:"img-main"},null,8,lt)]),t("div",ot,[(l(!0),r(_,null,P(a.value.image_urls,s=>(l(),r("img",{key:s,src:s,class:J({active:m.value===s}),onClick:N=>m.value=s,alt:"Thumbnail"},null,10,it))),128))])]),t("div",dt,[t("p",rt,u(a.value.category_name),1),t("h1",ut,u(a.value.name),1),t("p",ct,u(T(V)(a.value.price)),1),t("div",pt,[t("div",vt,[t("button",{onClick:B,"aria-label":"Giảm số lượng"},"-"),t("input",{type:"text",value:o.value,readonly:"","aria-label":"Số lượng hiện tại"},null,8,mt),t("button",{onClick:q,"aria-label":"Tăng số lượng"},"+")]),t("button",{class:"btn-primary",onClick:A},e[5]||(e[5]=[t("i",{class:"fas fa-credit-card"},null,-1),c(" THANH TOÁN ")]))]),e[6]||(e[6]=z('<div class="trust-bar" data-v-61eed797><div class="trust-item" data-v-61eed797><i class="fas fa-shield-alt" data-v-61eed797></i> <span data-v-61eed797>Hàng chính hãng 100%</span></div><div class="trust-item" data-v-61eed797><i class="fas fa-truck-fast" data-v-61eed797></i> <span data-v-61eed797>Giao hàng nhanh</span></div><div class="trust-item" data-v-61eed797><i class="fas fa-box-open" data-v-61eed797></i> <span data-v-61eed797>Đổi trả hàng 7 ngày</span></div></div>',1))])]),t("section",ht,[t("div",gt,[e[7]||(e[7]=t("h3",null,"Mô tả chi tiết",-1)),t("p",ft,u(a.value.description||"Chưa có mô tả chi tiết cho sản phẩm này."),1)])]),t("section",yt,[e[8]||(e[8]=t("h2",null,"Sản phẩm tương tự",-1)),e[9]||(e[9]=c()),e[10]||(e[10]=t("br",null,null,-1)),t("div",bt,[(l(!0),r(_,null,P(x.value,s=>(l(),g(Z,{key:s.ID,product:s},null,8,["product"]))),128))])])])):(l(),r("div",tt,"Không tìm thấy sản phẩm.")),(l(),g(R,{to:"body"},[E(Q,{name:"modal-fade"},{default:K(()=>[b.value?(l(),r("div",{key:0,class:"checkout-modal-backdrop",onClick:w(h,["self"])},[t("div",_t,[t("div",{class:"modal-header"},[e[12]||(e[12]=t("h3",null,"Thông tin đặt hàng",-1)),t("button",{class:"close-btn",onClick:h},e[11]||(e[11]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]))]),t("div",kt,[y.value?(l(),g(S,{key:0,message:"Đang xử lý đơn hàng..."})):(l(),r("div",Ct,[t("div",xt,[t("p",null,[e[13]||(e[13]=c("Sản phẩm: ")),t("strong",null,u(a.value.name),1)]),t("p",null,[e[14]||(e[14]=c("Số lượng: ")),t("strong",null,u(o.value),1)]),t("p",null,[e[15]||(e[15]=c("Tổng tiền: ")),t("strong",null,u(T(V)(a.value.price*o.value)),1)])]),t("form",{onSubmit:w(U,["prevent"])},[t("div",Mt,[e[16]||(e[16]=t("label",{for:"name"},"Họ và tên",-1)),p(t("input",{id:"name",type:"text",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=s=>n.value.name=s),placeholder:"Nhập tên của bạn",required:""},null,512),[[k,n.value.name]])]),t("div",Nt,[e[17]||(e[17]=t("label",{for:"phone"},"Số điện thoại",-1)),p(t("input",{id:"phone",type:"tel",class:"form-input","onUpdate:modelValue":e[1]||(e[1]=s=>n.value.phone=s),placeholder:"Nhập số điện thoại của bạn",required:""},null,512),[[k,n.value.phone]])]),t("div",Pt,[e[18]||(e[18]=t("label",{for:"address"},"Địa chỉ",-1)),p(t("textarea",{id:"address",class:"form-input","onUpdate:modelValue":e[2]||(e[2]=s=>n.value.address=s),placeholder:"Nhập địa chỉ nhận hàng",required:""},null,512),[[k,n.value.address]])]),t("div",Tt,[e[21]||(e[21]=t("label",null,"Phương thức thanh toán",-1)),t("div",Vt,[t("div",wt,[p(t("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=s=>n.value.paymentMethod=s),value:"cod"},null,512),[[D,n.value.paymentMethod]]),e[19]||(e[19]=t("span",null,"Thanh toán khi nhận hàng",-1))]),t("div",St,[p(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>n.value.paymentMethod=s),value:"bank_transfer"},null,512),[[D,n.value.paymentMethod]]),e[20]||(e[20]=t("span",null,"Chuyển khoản ngân hàng",-1))])])]),t("div",{class:"form-actions"},[t("button",{type:"button",class:"btn",onClick:h},"Hủy"),e[22]||(e[22]=t("button",{type:"submit",class:"btn-primary"},"Xác nhận đặt hàng",-1))])],32)]))])])])):W("",!0)]),_:1})]))],64))}},Ut=L(Dt,[["__scopeId","data-v-61eed797"]]);export{Ut as default};
