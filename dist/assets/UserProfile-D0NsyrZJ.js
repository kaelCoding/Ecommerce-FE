import{_ as D,r as m,A as B,B as F,z as q,c as o,d as K,b as t,t as i,i as n,m as _,p as g,k as M,l as Q,C as R,D as G,h as U,n as z,o as e,g as a,E as y,L as E}from"./index-ZpVQZX_T.js";const H={class:"user-profile-page container"},A={key:1,class:"profile-layout"},O={class:"profile-sidebar"},Y={class:"profile-card user-info-card"},$={class:"profile-ctn"},j={class:"username"},J={class:"email"},W={class:"overview-section"},X={class:"info-grid"},Z={class:"info-item"},tt={class:"info-value"},st={class:"info-item"},at={class:"info-value"},nt={key:0,class:"freeship-tag"},it={class:"loyalty-content"},et={class:"profile-card vip-card"},lt={class:"vip-card-header"},ot={class:"vip-level"},dt={class:"current-level-text"},rt={key:0,class:"progress-section"},ct={class:"progress-header"},vt={class:"progress-title"},ut={class:"progress-percentage"},ht={class:"progress-bar-container"},gt={class:"progress-remaining-text"},ft={key:1,class:"permanent-vip-message"},pt={key:0,class:"profile-card maintenance-card"},mt={class:"maintenance-info"},_t={class:"info-item"},yt={class:"info-value"},bt={class:"info-item"},Vt={class:"info-value text-red-500 font-bold"},Lt={class:"profile-card rules-accordion"},kt={key:0,class:"rules-container"},Tt={__name:"UserProfile",setup(Pt){const b=m(!0),S=m(""),r=m(!1),f={1:1e6,2:25e5,3:5e6,4:8e6},V=B(()=>{if(!a.value||a.value.vipLevel>=4)return 100;const l=a.value.vipLevel,s=l+1,c=a.value.totalSpent;if(l===0){const h=f[s];return Math.min(100,c/h*100)}const d=f[l],v=f[s]-d,u=c-d;return Math.min(100,u/v*100)}),w=B(()=>{var s;return((s=a.value)==null?void 0:s.vipLevel)>=2});return F(async()=>{try{await q()}catch(l){console.error("Failed to fetch user info:",l),S.value="Không thể tải thông tin người dùng. Vui lòng thử lại."}finally{b.value=!1}}),(l,s)=>{var d,p,v,u,h,L,k,T,P,N,I,x,C;const c=z("RouterLink");return e(),o("div",H,[b.value?(e(),K(E,{key:0,message:"Đang tải dữ liệu..."})):(e(),o("div",A,[t("aside",O,[t("div",Y,[t("div",$,[s[1]||(s[1]=t("i",{class:"fa-solid fa-circle-user profile-icon"},null,-1)),t("div",null,[t("h1",j,i((d=n(a))==null?void 0:d.username),1),t("p",J,i((p=n(a))==null?void 0:p.email),1)])]),s[9]||(s[9]=t("div",{class:"divider"},null,-1)),t("div",W,[s[6]||(s[6]=t("h2",{class:"section-title"},"Tổng quan",-1)),t("div",X,[t("div",Z,[s[2]||(s[2]=t("span",{class:"info-label"},"Tổng chi tiêu",-1)),t("span",tt,i(n(y)((v=n(a))==null?void 0:v.totalSpent)),1)]),t("div",st,[s[3]||(s[3]=t("span",{class:"info-label"},"Mức giảm giá",-1)),t("span",at,i((((u=n(a))==null?void 0:u.discountPercentage)*100).toFixed(0))+"%",1)]),w.value?(e(),o("div",nt,s[4]||(s[4]=[t("i",{class:"fa-solid fa-truck"},null,-1),t("span",null,"Freeship",-1)]))):_("",!0)]),s[7]||(s[7]=g()),s[8]||(s[8]=t("br",null,null,-1)),M(c,{to:"/lucky-spin",class:"btn-primary"},{default:Q(()=>s[5]||(s[5]=[g("Vòng quay may mắn")])),_:1})])])]),t("main",it,[t("div",et,[t("div",lt,[t("div",ot,[s[10]||(s[10]=t("i",{class:"fa-solid fa-crown"},null,-1)),t("span",null,"VIP "+i((h=n(a))==null?void 0:h.vipLevel),1)]),t("p",dt,i(((L=n(a))==null?void 0:L.vipLevel)===4?"Cấp bậc Vĩnh Viễn":"Cấp bậc hiện tại"),1)]),((k=n(a))==null?void 0:k.vipLevel)<4?(e(),o("div",rt,[t("div",ct,[t("span",vt,"Lên VIP "+i(((T=n(a))==null?void 0:T.vipLevel)+1),1),t("span",ut,i(Math.round(V.value))+"%",1)]),t("div",ht,[t("div",{class:"progress-bar",style:R({width:V.value+"%"})},null,4)]),t("p",gt," Chi tiêu thêm "+i(n(y)((P=n(a))==null?void 0:P.nextLevelRequirement))+" để thăng hạng. ",1)])):(e(),o("div",ft,s[11]||(s[11]=[t("p",null,"Bạn đã đạt cấp bậc cao nhất. Cảm ơn bạn đã đồng hành cùng TUNI TOKU!",-1)])))]),((N=n(a))==null?void 0:N.vipLevel)>0&&((I=n(a))==null?void 0:I.vipLevel)<4?(e(),o("div",pt,[s[14]||(s[14]=t("h3",{class:"section-title"},"Duy trì cấp bậc",-1)),t("div",mt,[t("div",_t,[s[12]||(s[12]=t("span",{class:"info-label"},[t("i",{class:"fa-solid fa-clock"}),g(" Ngày hết hạn")],-1)),t("span",yt,i(new Date((x=n(a))==null?void 0:x.vipExpiryDate).toLocaleDateString()),1)]),t("div",bt,[s[13]||(s[13]=t("span",{class:"info-label"},[t("i",{class:"fa-solid fa-bullseye"}),g(" Cần chi tiêu")],-1)),t("span",Vt,i(n(y)((C=n(a))==null?void 0:C.maintenanceRequirement)),1)])])])):_("",!0),t("div",Lt,[t("button",{onClick:s[0]||(s[0]=Nt=>r.value=!r.value),class:"accordion-button"},[s[15]||(s[15]=t("h3",{class:"section-title"},"Thể lệ",-1)),t("i",{class:G(["fa-solid fa-chevron-down",{"rotate-180":r.value}])},null,2)]),r.value?(e(),o("div",kt,s[16]||(s[16]=[U('<div class="rules-section" data-v-5a1472fd><h3 data-v-5a1472fd>1. Các Cấp Bậc VIP &amp; Quyền Lợi</h3><p data-v-5a1472fd>Hành trình của bạn sẽ đi qua 4 cấp bậc, mỗi cấp độ sẽ mang lại một mức chiết khấu vĩnh viễn trên mọi đơn hàng.</p><ul class="vip-list" data-v-5a1472fd><li data-v-5a1472fd><strong data-v-5a1472fd>VIP 1</strong><ul data-v-5a1472fd><li data-v-5a1472fd><strong data-v-5a1472fd>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 1 triệu VNĐ.</li><li data-v-5a1472fd><strong data-v-5a1472fd>Quyền lợi:</strong> Giảm 2% trên mọi đơn hàng.</li></ul></li><li data-v-5a1472fd><strong data-v-5a1472fd>VIP 2</strong><ul data-v-5a1472fd><li data-v-5a1472fd><strong data-v-5a1472fd>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 2,5 triệu VNĐ.</li><li data-v-5a1472fd><strong data-v-5a1472fd>Quyền lợi:</strong> Giảm 3% trên mọi đơn hàng + Freeship.</li></ul></li><li data-v-5a1472fd><strong data-v-5a1472fd>VIP 3</strong><ul data-v-5a1472fd><li data-v-5a1472fd><strong data-v-5a1472fd>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 5 triệu VNĐ.</li><li data-v-5a1472fd><strong data-v-5a1472fd>Quyền lợi:</strong> Giảm 5% trên mọi đơn hàng + Freeship.</li></ul></li><li data-v-5a1472fd><strong data-v-5a1472fd>VIP 4 (Vĩnh Viễn)</strong><ul data-v-5a1472fd><li data-v-5a1472fd><strong data-v-5a1472fd>Đạt được khi:</strong> Tổng chi tiêu tích lũy đạt 8 triệu VNĐ.</li><li data-v-5a1472fd><strong data-v-5a1472fd>Quyền lợi:</strong> Giảm 7% trên mọi đơn hàng trọn đời! + Freeship.</li></ul></li></ul></div><hr class="rules-divider" data-v-5a1472fd><div class="rules-section" data-v-5a1472fd><h3 data-v-5a1472fd>2. Quy Tắc Duy Trì Cấp Bậc</h3><p data-v-5a1472fd>Để đảm bảo bạn luôn nhận được những ưu đãi tốt nhất, các cấp bậc VIP 1, 2 và 3 có một quy tắc duy trì đơn giản:</p><ul class="maintenance-list" data-v-5a1472fd><li data-v-5a1472fd><strong data-v-5a1472fd>Thời hạn duy trì:</strong> Kể từ khi bạn đạt một cấp VIP mới, bạn sẽ có 3 tháng để duy trì cấp bậc đó.</li><li data-v-5a1472fd><strong data-v-5a1472fd>Yêu cầu duy trì:</strong> Trong vòng 3 tháng này, bạn chỉ cần chi tiêu một khoản tiền bằng 30% giá trị ban đầu của cấp bậc đó. Khi bạn hoàn thành yêu cầu này, cấp bậc của bạn sẽ được duy trì thêm 3 tháng nữa. <ul data-v-5a1472fd><li data-v-5a1472fd><em data-v-5a1472fd>Ví dụ:</em> Khi bạn đạt VIP 1 (với 1 triệu VNĐ), bạn chỉ cần chi tiêu thêm 300.000 VNĐ trong 3 tháng để duy trì cấp VIP 1.</li><li data-v-5a1472fd>Khi bạn đạt VIP 2 (với 2.5 triệu VNĐ), bạn chỉ cần chi tiêu thêm 750.000 VNĐ trong 3 tháng để duy trì cấp VIP 2.</li></ul></li><li data-v-5a1472fd><strong data-v-5a1472fd>Thăng hạng tự động:</strong> Nếu trong 3 tháng này, bạn chi tiêu đủ số tiền của cấp tiếp theo, bạn sẽ được thăng hạng ngay lập tức và chu kỳ 3 tháng mới sẽ bắt đầu.</li><li data-v-5a1472fd><strong data-v-5a1472fd>Hạ cấp:</strong> Nếu không đạt đủ yêu cầu duy trì, bạn sẽ trở về cấp bậc trước đó.</li></ul></div>',3)]))):_("",!0)])])]))])}}},xt=D(Tt,[["__scopeId","data-v-5a1472fd"]]);export{xt as default};
