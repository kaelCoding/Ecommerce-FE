import{z as i}from"./index-Ca9xZajP.js";import{g as a,a as c}from"./category-DXDY83A7.js";const h=i("product",{state:()=>({categoriesWithProducts:[],isLoading:!1,error:null}),actions:{async fetchCategoriesAndProducts(){if(!(this.categoriesWithProducts.length>0&&!this.isLoading)){this.isLoading=!0,this.error=null;try{const t=await a();if(!t||t.length===0){this.categoriesWithProducts=[];return}const s=t.map(r=>c(r.ID).then(o=>({...r,products:o}))),e=await Promise.all(s);this.categoriesWithProducts=e.filter(r=>r.products&&r.products.length>0)}catch(t){throw this.error=t,console.error("Failed to fetch data:",t),t}finally{this.isLoading=!1}}}}});export{h as u};
